<!-- views/flights/index.ejs -->
<%- include('../partials/header') %>

<h1><%= title %></h1>

<table id="list">
  <thead>
    <tr>
      <th>Airline</th>
      <th>Airport</th>
      <th>Flight No.</th>
      <th>Departure Date/Time</th>
    </tr>
  </thead>
  <tbody>
    <% flights.sort((a, b) => new Date(a.departs) - new Date(b.departs)).forEach((flight) => { %>
      <% const now = new Date(); %>
      <tr class="<%= flight.departs < now ? 'departed' : '' %>">
        <td><%= flight.airline %></td>
        <td><%= flight.airport %></td>
        <td><%= flight.flightNo %></td>
        <td><%= flight.departs.toLocaleString() %></td>
        <td><a href="/flights/<%= flight._id %>">Details</a></td>
      </tr>
    <% }) %>
  </tbody>
</table>

<%- include('../partials/footer') %>

